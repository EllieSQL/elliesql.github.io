<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="Deformable Neural Radiance Fields creates free-viewpoint portraits (nerfies) from casually captured videos.">
  <meta name="keywords" content="Nerfies, D-NeRF, NeRF">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EllieSQL: Cost-Efficient Text-to-SQL with Complexity-Aware Routing</title>
  <script type="module" src="https://md-block.verou.me/md-block.js"></script>


  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-PYVRSFMDRL');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <!-- <link rel="icon" href="./static/images/favicon.png"> -->
  <!-- <link rel="icon" href="static\diallogo.svg"> -->
  <link rel="icon" href="static\elephant.svg">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
</head>
<body>

<nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <div class="navbar-menu">
    <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
      <a class="navbar-item" href="https://github.com/HKUSTDial">
      <span class="icon">
          <!-- <i class="fas fa-home"></i> -->
          <img src="static/favicon.png" alt="Home" />
      </span>
      </a>

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          More Research @ DIAL
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="https://github.com/HKUSTDial">
            HKUST(GZ) DIAL
          </a>
          <!-- <a class="navbar-item" href="https://nerfies.github.io">
            Nerfies
          </a>
          <a class="navbar-item" href="https://latentfusion.github.io">
            LatentFusion
          </a>
          <a class="navbar-item" href="https://photoshape.github.io">
            PhotoShape -->
          </a>
        </div>
      </div>
    </div>

  </div>
</nav>


<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">üêòEllieSQL: Cost-Efficient Text-to-SQL <br> with Complexity-Aware Routing</h1>
          
          <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="https://derrickzhuyz.github.io/">Yizhang Zhu</a><sup>1*</sup>,</span>
            <span class="author-block">
              <a href="https://github.com/JiangRunzhi/">Runzhi Jiang</a><sup>1*</sup>,
            <span class="author-block">
              <a href="https://liboyan.vip/">Boyan Li</a><sup>1</sup>,
            </span>
            <span class="author-block">
              <a href="https://nantang.github.io/">Nan Tang</a><sup>1,2</sup>,
            </span>
            <span class="author-block">
              <a href="https://luoyuyu.vip/">Yuyu Luo</a><sup>1,2‚úâÔ∏è</sup>
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block"><sup>1</sup>The Hong Kong University of Science and Technology (Guangzhou),</span>
            <span class="author-block"><sup>2</sup>The Hong Kong University of Science and Technology</span>
          </div>

          <div class="is-size-5 publication-authors">
            </strong><span class="author-block" style="color: rgb(155,155,155); font-weight: normal;">*Equal Contribution.</span>
          </div>

          <!-- <div class="is-size-5 publication-authors">
            </strong><span class="author-block" style="color: rgb(145, 107, 164); font-weight: bold;">NeurIPS 2024 (D&B)üéâ</span>
          </div> -->

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://arxiv.org/pdf/2503.22402"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://arxiv.org/abs/2503.22402"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span>
                </a>
              </span>
              <!-- Video Link. -->
              <!-- <span class="link-block">
                <a href="https://www.youtube.com/watch?v=MrKrnHhk8IA"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-youtube"></i>
                  </span>
                  <span>Video</span>
                </a>
              </span> -->
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/derrickzhuyz/EllieSQL"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <!-- Huggingface checkpoint -->
              <span class="link-block">
                <a href="https://huggingface.co/derrickzhu/EllieSQL_Router_Checkpoints"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <!-- <i class="fas fa-database"></i> -->ü§ó
                  </span>
                  <span>Model</span>
                  </a>
              </span>
              <!-- Dataset Link. -->
              <!-- <span class="link-block">
                <a href="https://github.com/HKUSTDial/StatQA/tree/main/StatQA"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-database"></i>
                  </span>
                  <span>Data</span>
                  </a>
              </span> -->
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>



<!-- <section class="hero is-light is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
        <div class="item item-steve">
          <video poster="" id="steve" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/steve.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-chair-tp">
          <video poster="" id="chair-tp" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/chair-tp.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-shiba">
          <video poster="" id="shiba" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/shiba.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-fullbody">
          <video poster="" id="fullbody" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/fullbody.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-blueshirt">
          <video poster="" id="blueshirt" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/blueshirt.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-mask">
          <video poster="" id="mask" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/mask.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-coffee">
          <video poster="" id="coffee" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/coffee.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-toby">
          <video poster="" id="toby" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/toby2.mp4"
                    type="video/mp4">
          </video>
        </div>
      </div>
    </div>
  </div>
</section> -->


<section class="hero teaser">
  <div class="container is-max-desktop">
      <!-- <img id="teaser" autoplay muted loop playsinline height="100%" src="./static/images/human_statistician_thinking.png"/> -->
      <img id="teaser" autoplay muted loop playsinline width="100%" height="100%" src="static\images\teaser.png"/>
      <h2 class="subtitle has-text-centered">
        Teaser Figure: Framework of EllieSQL
      </h2>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-full-wdith">
        <h2 class="title is-2">üìñIntroduction</h2>
        <div class="content has-text-justified">
          <p>
            Text-to-SQL automatically translates natural language queries to SQL, allowing non-technical users to retrieve data from databases 
            without specialized SQL knowledge. Despite the success of advanced LLM-based Text-to-SQL approaches on leaderboards, their unsustainable 
            computational costs‚Äîoften overlooked‚Äîstand as the <strong>"elephant in the room"</strong> in current leaderboard-driven research, limiting 
            their economic practicability for real-world deployment and widespread adoption.
          </p>
          <p>  
            To tackle this, we exploratively propose <strong>EllieSQL</strong>, a complexity-aware routing framework that assigns queries to suitable SQL generation 
            pipelines based on estimated complexity. We investigate multiple routers to direct simple queries to efficient approaches while 
            reserving computationally intensive methods for complex cases. Drawing from economics, we introduce the Token Elasticity of Performance (TEP)
            metric, capturing cost-efficiency by quantifying the responsiveness of performance gains relative to token investment in SQL generation. 
            Experiments show that compared to always using the most advanced methods in our study, EllieSQL with the Qwen2.5-0.5B-DPO 
            router reduces token use by over 40% without compromising performance on Bird development set, achieving more than a 2√ó boost in TEP over non-routing approaches. This 
            not only advances the pursuit of cost-efficient Text-to-SQL but also invites the community to weigh resource efficiency alongside performance, 
            contributing to progress in sustainable Text-to-SQL.
          </p>
          <!-- <p>We aim to invite the whole community for further research into balancing performance with resource expenditure, hoping to contribute to more practical 
            and sustainable Text-to-SQL. This paper serves as an exploration, a stepping stone rather than a definitive answer, intended to spark further research and discussion. 
            In this paper, we try to confront the <i>elephant</i> with contributions summarized as follows:</p>
          <md-block>
            - <strong>Elephant in the Room.</strong> We highlight a critical yet overlooked cost-efficiency limitation in current Text-to-SQL methods, hindering their 
            practical deployment beyond laboratories.
            - <strong>TEP Metric.</strong> We introduce Token Elasticity of Performance (TEP), an economic-inspired metric for evaluating the responsiveness of 
            performance gains relative to token investments in SQL generation.
            - <strong>EllieSQL.</strong> We propose EllieSQL framework with various router implementations to direct queries to appropriate tiered SQL generation 
            methods based on estimated complexity.
            - <strong>Empirical Analysis.</strong> We conduct empirical analysis to assess cost-efficiency. Experiments demonstrate the effectiveness of EllieSQL 
            in achieving a significant reduction in token consumption without compromising performance.
          </md-block> -->

          <!-- <p>&ensp;</p>
          <div class="container is-max-desktop">
            <img id="teaser" autoplay muted loop playsinline height="100%" src="./static/images/human_statistician_thinking.png"/>
            <h5 class="subtitle has-text-centered">
              An Example of Statistical Analysis Task
            </h5>
          </div>
        </div>
      </div>
    </div> -->

    <!-- / Abstract. -->

    <!-- Paper video. -->
    <!-- <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Video</h2>
        <div class="publication-video">
          <iframe src="https://www.youtube.com/embed/MrKrnHhk8IA?rel=0&amp;showinfo=0"
                  frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
      </div>
    </div> -->
    <!--/ Paper video. -->
  </div>
</section>



<!-- Implementation  -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column">
        <h2 class="title is-2">üõ†Ô∏èImplementations</h2>
        <p>&ensp;</p>
        <div class="columns is-centered">
          <div class="content has-text-justified">
            <md-block>
              As shown in teaser figure, our EllieSQL operates in three key phases: schema linking, routing, and tiered SQL generation. 
              At the heart of EllieSQL lies the router, which is, serving as the <i>decision-making core</i>, which dynamically directs queries to the appropriate 
              tier of SQL generation methods based on estimated query complexity. The router is strategically positioned in Phase II, following the schema linking 
              phase since the filtered schema provides valuable structural information that strongly correlates with query complexity.
              
              Our motivation stems from the following observation: in practice, Text-to-SQL tasks exhibit significant heterogeneity in complexity, and not all cases 
              necessitate the most powerful yet sophisticated and resource-intensive 
              approach for effective resolution. Existing leading approaches, however, indiscriminately apply complex reasoning and computationally expensive 
              methods to all queries, resulting in computational waste when processing simple, straightforward queries that could be effectively handled by 
              lightweight approaches. This inefficiency reveals a clear opportunity for optimization through complexity-aware routing.

              We investigate various router implementations across three categories for our experiments as follows. Qwen2.5-Coder-0.5B (Qwen) and RoBERTa-base 
              are fine-tuned as routers. Following CHASE-SQL, We implementate our three-tiered SQL generation methods (Basic, Intermediate, Advacned) in Phase III, 
              as shown in teaser.

              > <strong><i>Please refer to our paper for more detials.</i></strong>
            </md-block>
            <!-- <md-block>
              We investigate various router implementations across three categories for our experiments as follows. Qwen2.5-Coder-0.5B (Qwen) and RoBERTa-base 
              are fine-tuned as routers.
              - Classification-based routers (KNN, SFT)
              - Cascading routers
              - preference learning-based routers (pairwise ranking, DPO)
            </md-block>
            <br>
            <md-block>
              Following CHASE-SQL, We implementate our three-tiered SQL generation methods (Basic, Intermediate, Advacned) in Phase III, as shown in teaser.
              - Basic: Direct input-output to generate SQL;
              - Intermediate: Demploys a Divide-and-Conquer Chain-of-Thought strategy with a fixer;
              - Advanced: Building on Intermediate, further introduce Online Synthesis mechanism.
            </md-block> -->
            <!-- <p>&ensp;</p>
            <div class="container is-max-desktop">
              <img id="teaser" autoplay muted loop playsinline height="90%" src="static\images\benchmark_example.png"/>
              <h5 class="subtitle has-text-centered">
                An Example in StatQA
              </h5>
            </div>
            <div class="container is-max-desktop">
              <img id="teaser" autoplay muted loop playsinline height="90%" src="static\images\distribution.png"/>
              <h5 class="subtitle has-text-centered">
                The Proportion of Statistical Tasks in StatQA
              </h5> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Experiments -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
    <div class="column is-centered">
      <h2 class="title is-2">üß™Experiments</h2>
      <p>&ensp;</p>
      <div class="columns is-centered">
        <div class="content has-text-justified">
          <md-block>
            <strong>Experiment Objective.</strong> The primary objective of our experiments is to validate whether our complexity-aware routing framework for 
            Text-to-SQL can maintain performance comparable to consistently using the most advanced method while significantly reducing token consumption. Therefore, 
            our analysis <i>focuses on relative performance differences and comparisons</i> between different methods, rather than <i>absolute values</i>.
            
            <strong>Metrics.</strong> Execution Accuracy (EX) evaluates the performance of the Text-to-SQL system by comparing whether the execution result sets of the 
            gold SQL queries and the predicted SQL queries are identical. The Performance Gap Recovered (PGR) assesses the effectiveness of routers (Ong et al., 2025)
            while  Token Elasticity of Performance (TEP)  measures the responsiveness of performance gains relative to token investments.
            
            <strong>Results.</strong> The tables and figures below show the performance across difference experiments (both base and routing methods), relationship 
            between PGR and TEP, EX and token cost, G_A allocation and other metrics, repectively. 

            > <strong><i>For full results and detailed analysis, please refer to our paper.</i></strong>

          </md-block>
          
          <!-- <md-block>> For full results and detailed analysis, please refer to our paper.</md-block> -->
          <!-- <p>&ensp;</p> -->
         
          <div class="container is-max-desktop image-container">
            <img id="teaser" autoplay muted loop playsinline width="75%" height="90%" src="static\images\exp_results_table.png" style="display: block; margin-left: auto; margin-right: auto;" />
            <!-- <h5 class="subtitle has-text-centered">
              Best Results of Each Model in Sub-tasks.
            </h5> -->
          </div>
          
          <div class="container is-max-desktop image-container">
            <img id="teaser" autoplay muted loop playsinline width="75%" height="90%" src="static\images\scatter_plot.png" style="display: block; margin-left: auto; margin-right: auto;" />
            <h5 class="subtitle has-text-centered">
              <!-- Distribution of Error Categories Across Experiments -->
            </h5>
          </div>
          
          <div class="container is-max-desktop image-container">
            <img id="teaser" autoplay muted loop playsinline width="75%" height="90%" src="static\images\GA_distribution.png" style="display: block; margin-left: auto; margin-right: auto;" />
            <h5 class="subtitle has-text-centered">
              <!-- Distribution of Error Categories Across Experiments -->
            </h5>
          </div>
          
          <style>
            .image-container {
              margin-top: 1.5rem;
              /* margin-bottom: 2rem;  */
            }
          </style>
        </div>
      </div>
    </div>
  </div>
  </div>
</section>


<!-- Contributions -->
<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
    <div class="column is-centered">
      <h2 class="title is-2">üåüOur Contributions</h2>
      <p>&ensp;</p>
      <div class="columns is-centered">
        <div class="content has-text-justified">
          <p>We aim to invite the whole community for further research into balancing performance with resource expenditure, hoping to contribute to more practical 
            and sustainable Text-to-SQL. This paper serves as an exploration, a stepping stone rather than a definitive answer, intended to spark further research and discussion. 
            In this paper, we try to confront the <i>elephant</i> with contributions summarized as follows:</p>
          <md-block>
            - <strong>Elephant in the Room.</strong> We highlight a critical yet overlooked cost-efficiency limitation in current Text-to-SQL methods, hindering their 
            practical deployment beyond laboratories.
            - <strong>TEP Metric.</strong> We introduce Token Elasticity of Performance (TEP), an economic-inspired metric for evaluating the responsiveness of 
            performance gains relative to token investments in SQL generation.
            - <strong>EllieSQL.</strong> We propose EllieSQL framework with various router implementations to direct queries to appropriate tiered SQL generation 
            methods based on estimated complexity.
            - <strong>Empirical Analysis.</strong> We conduct empirical analysis to assess cost-efficiency. Experiments demonstrate the effectiveness of EllieSQL 
            in achieving a significant reduction in token consumption without compromising performance.
          </md-block>

          <!-- <p>&ensp;</p> -->
        </div>
      </div>
    </div>
  </div>
  </div>
</section>


<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h1 class="title">‚úèÔ∏èBibTeX Citation</h1>
    <p>If you find our work useful or inspiring, please kindly cite:</p>
    <pre><code>@misc{zhu2025elliesql,
      title={EllieSQL: Cost-Efficient Text-to-SQL with Complexity-Aware Routing}, 
      author={Yizhang Zhu and Runzhi Jiang and Boyan Li and Nan Tang and Yuyu Luo},
      year={2025},
      eprint={2503.22402},
      archivePrefix={arXiv},
      primaryClass={cs.DB},
      url={https://arxiv.org/abs/2503.22402}, 
}
  </code></pre>
  <p>&ensp;</p>
  <p>&ensp;</p>
  </div>
</section>


<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <!-- <a class="icon-link"
         href="https://arxiv.org/pdf/2406.07815">
        <i class="fas fa-file-pdf"></i>
      </a> -->
      <a class="icon-link" href="https://github.com/HKUSTDial" class="external-link" disabled>
        <i class="fab fa-github"></i>
      </a>
    </div>
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            This website is licensed under a <a rel="license"
                                                href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
          <p>
            This means you are free to borrow the <a
              href="https://github.com/nerfies/nerfies.github.io">source code</a> of this website,
            we just ask that you link back to this page in the footer.
            Please remember to remove the analytics code included in the header of the website which
            you do not want on your website.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

</body>
</html>
